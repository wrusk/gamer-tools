<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>HTML 5 Boilerplate</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/xb64.js"></script>
    <script>
      function getRunTime(){
        let ntscLastDigits = ["0", "1", "3", "5", "6", "8"];
        let palLastDigits = ["0", "2", "4", "5", "6", "8"];

        console.log("calculating run time");
        let startTime = 240.00;
        if (document.getElementsByName("format")[0].checked){
          //NTSC chosen
          let endTime = timeToSeconds(calculateLastDigit(document.getElementById('timeRemaining').value,ntscLastDigits));
          console.log("starttime: "+startTime+" endtime: "+endTime);
          let runTime = secondsToTime(calculateLastDigit(calculateRunTime(startTime,endTime,ntscLastDigits),ntscLastDigits));
          console.log("runtime: " + runTime);
          document.getElementById("runTime").innerHTML = runTime;
          return false;
        } else if (document.getElementsByName("format")[1].checked){
          //PAL chosen
          let endTime = timeToSeconds(calculateLastDigit(document.getElementById('timeRemaining').value,palLastDigits));
          console.log("starttime: "+startTime+" endtime: "+endTime);
          let runTime = secondsToTime(calculateLastDigit(calculateRunTime(startTime,endTime,palLastDigits),palLastDigits));
          console.log("runtime: " + runTime);
          document.getElementById("runTime").innerHTML = runTime;
          return false;
        } else {
          alert("Please select your format");
        }
      }
    </script>
  </head>
  <body>
    <h1>Excite Bike 64 Hill Climb run calculator</h1>
    <label for="timeRemaining">Time Remaining</label><input type="text" id="timeRemaining" name="timeRemaining"/><br/>
    <div id="runTimeResults">Format: <input name="format" value="NTSC" id="choice1" type="radio"><label for="choice1">NTSC</label> <input name="format" value="PAL" id="choice2" type="radio"><label for="choice2">PAL</label></div>
    <div id="runTimeResults">Run Time: <span id="runTime"></span></div>
    <input type="button" value="Calculate Run Time" onclick="getRunTime()"/>
  </body>
</html>